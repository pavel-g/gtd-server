<?xml version="1.0" encoding="UTF-8"?>
<database name="gtd" defaultIdMethod="native" namespace="Gtd\Propel">
	<table name="users" phpName="User">
		<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true"/>
		<column name="name" type="varchar" size="190" required="true"/>
		<column name="pass" type="varchar" size="190" required="true"/>
		<unique name="name">
			<unique-column name="name"/>
		</unique>
	</table>
	<table name="lists" phpName="TaskList">
		<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true"/>
		<column name="user_id" type="integer" required="true"/>
		<column name="title" type="varchar" size="190" required="true"/>
		<column name="removed" type="timestamp" required="false"/>
		<foreign-key foreignTable="users">
			<reference local="user_id" foreign="id"/>
		</foreign-key>
	</table>
	<table name="tasks" phpName="TaskTree">
		<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true"/>
		<column name="parent_id" type="integer"/>
		<column name="path" type="varchar" size="190" required="true"/>
		<column name="list_id" type="integer" required="true"/>
		<column name="title" type="longvarchar" required="true"/>
		<column name="description" type="longvarchar"/>
		<column name="created" type="timestamp"/>
		<column name="due" type="timestamp"/>
		<column name="removed" type="timestamp"/>
		<column name="completed" type="timestamp"/>
		<column name="has_children" type="boolean" required="true" defaultValue="false"/>
		<foreign-key foreignTable="lists">
			<reference local="list_id" foreign="id"/>
		</foreign-key>
	</table>
	<table name="attributes" phpName="Attributes">
		<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true"/>
		<column name="task_id" type="integer" required="true"/>
		<column name="type" type="varchar" size="50" required="true"/>
		<column name="string_value" type="longvarchar"/>
		<column name="integer_value" type="bigint"/>
		<column name="float_value" type="double"/>
		<column name="boolean_value" type="boolean"/>
		<foreign-key foreignTable="tasks">
			<reference local="task_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="attribute_types">
			<reference local="type" foreign="code"/>
		</foreign-key>
		<unique name="attr_unique">
			<unique-column name="task_id"/>
			<unique-column name="type"/>
		</unique>
	</table>
	<table name="attribute_types" phpName="AttributeTypes">
		<column name="code" type="varchar" size="50" required="true" primaryKey="true"/>
		<column name="name" type="varchar" size="190" required="true"/>
		<column name="type" type="varchar" size="50" required="true"/>
		<foreign-key foreignTable="types">
			<reference local="type" foreign="code"/>
		</foreign-key>
	</table>
	<table name="types" phpName="Types">
		<column name="code" type="varchar" size="50" required="true" primaryKey="true"/>
		<column name="group_code" type="varchar" size="50" required="true"/>
		<foreign-key foreignTable="type_groups">
			<reference local="group_code" foreign="code"/>
		</foreign-key>
	</table>
	<table name="type_groups" phpName="TypeGroups">
		<column name="code" type="varchar" size="50" required="true" primaryKey="true"/>
		<column name="name" type="varchar" size="190" required="true"/>
	</table>
</database>
